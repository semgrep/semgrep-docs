```yaml
version: v1.0
name: Semaphore Semgrep CE Example
agent:
  machine:
    type: f1-standard-2
    os_image: ubuntu2204
blocks:
  - name: Semgrep
    task:
      jobs:
        # Job performing a full scan using Semgrep CE
        - name: Semgrep CE Scan
          commands:
            - checkout
            - sudo pip install semgrep
            # Save report using JUnit to present results in the test dashboard
            - semgrep scan --junit-xml --output=report.xml
            - '[[ -f report.xml ]] && test-results publish report.xml'
after_pipeline:
  task:
    jobs:
      - name: Publish Results
        commands:
          - test-results gen-pipeline-report
```
